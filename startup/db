const { Pool } = require('pg');
module.exports = () =>  {
    // Create a connection pool
      const pool = new Pool({
      user: 'hipxtarv',
      host:"queenie.db.elephantsql.com",
      database: 'hipxtarv',
      password: 'HJNz9lmWLVS_V5ZxzGfpEj0Eb-kNMbLF',
      port: 5432,// default port for PostgreSQL,
      ssl: {
        rejectUnauthorized: false
      }
    }
    );
    // Test the connection
    pool.connect((err, client, release) => {
        if (err) {
            console.error('Error connecting to PostgreSQL database:', err);
            return;
        }
        
        console.log('Connected to PostgreSQL database');
        
        // Release the client back to the pool
        release();
    });
  
    exports.pool = pool;
}